<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="content-language" content="en">
<meta http-equiv="language" content="en">
<link rel="stylesheet" href="standard.css" type="text/css" media="screen">
<meta http-equiv="keywords" content="Java, svg, dtd, layout, pdf">
<meta NAME="robots" CONTENT="index,follow">  
<title>x2svg installation and running</title>
</head>
<body>
<div class="werbung" id="werbung">
<a href="http://bsd.de/e3fu/">My EJB3 book</a><p/>
<a href="http://labs.jboss.com/portal/jbossejb3">EJB 3 at JBoss</a>
<p/>
<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=199130&amp;type=1" width="88" height="31" alt="SourceForge.net Logo" /></a>
</div> 
<div class="indent">
[ <a href="index.html">Start</a> ]
[ Install etc. ]
[ <a href="changes.html">Changelog</a> ]
[ <a href="todo.html">Todos</a> ]
[ <a href="http://sf.net/projects/x2svg/">SourceForge</a>]
[ <a href="symbols.html">Symbols</a> ]
[ <a href="properties.html">Properties</a> ]
[ <a href="http://x2svg.sf.net/javadoc/">JavaDoc</a> ]
[ <a href="http://freshmeat.net/projects/x2svg/">FreshMeat</a> ]
[ <a href="http://www.ohloh.net/projects/x2svg">Ohloh</a> ]
[ <a href="http://x2svg.svn.sourceforge.net/viewvc/x2svg/">Browse source</a> ]
<h1>x2svg</h1>
<h2>Contents</h2>
<ul>
<li><a href="#license">License</a></li>
<li><a href="#install">Installation</a></li>
<li><a href="#build">Build</a></li>
<li><a href="#run">Run</a></li>
<li><a href="#gui">The Gui</a></li>
<li>The individual <a href="#parsers">Parsers</a></li>
<li><a href="#ant">Ant tasks</a></li>
<li><a href="#license">License</a></li>
<li><a href="changes.html">Changelog</a>
</ul>
<hr/>
<h2><a name="install">Installation</a></h2>
To use x2svg, you need fop and dtdparser, which need to be present in the lib/ folder. In addition you need ant to build the distribution and use x2svg
as ant tasks in build scripts.<br/>
<p/>
Dependencies like FOP and DTDParser can now be pulled down by executing:<br/>
<pre>
ant pull-dependencies
</pre>
This also pulls ant.jar into lib/ from the ant distribution.
<p/>

Those dependencies can also manually be obtained from:
<ul>
<li>DTDParser: from Mark Wutkas page at <a href="http://wutka.com/dtdparserdownload.html">wutka.com</a>. Use the 1.21
version.
</li>
<li>FOP: from Apache at <a href="http://xmlgraphics.apache.org/fop/download.html">xmlgraphics.apache.org</a>. Pick the 0.95beta version
</li>
<li>Apache ant from <a href="http://ant.apache.org/">ant.apache.org</a>. One of the 1.6 versions is ok. Ant is needed for building
the software (which could also be built from within the IDE) and to compile the ant task support.</li>
<li>TestNG from <a href="www.testng.org">TestNG.org</a>. TestNG 5.6 does fine. Put the library
<em>testng-5.6-jdk15.jar</em> into a folder <em>testng</em> within the lib/ directory.
</ul>
Unzip the distributions into the <em>lib/</em> folder of the <em>x2svg</em> project. The file structure should
look like this:<br/>
<img src="img/x2svg_dir.png" alt="Directory structure of x2svg distro" title="Directory structure of the x2svg distribuition"/>
<h2><a name="build">Building x2svg</a></h2>
Go into the project and call <em>ant</em>. This should build all the necessary files for you.
<br/>
The build file knows those targets:
<ul>
  <li>all: build the whole show</li>
  <li>compile: compile the sources</li>
  <li>package: jar up the generated classes</li>
  <li>javadoc: generate the javadoc documentation in <a href="javadoc/index.html">doc/javadoc</a></li>
  <li>run-sample: runs the application against the file <em>sample.dtd</em> to
produce a few output files in the <em>out/</em> directory like:
<a href="../sample-out.pdf">sample-out.pdf</a> and 
  <a href="../sample-out.svg">sample-out.svg</a>
  </li>
  <li>clean: clean up generated class files</li>
  <li>clobber: like clean, but also remove javadoc, generated samples and .jar files</li>
  <li>tests: runs the tests in the test suite</li>
  <li>run-gui: starts the simple Swing gui</li>
  <li>pull-dependencies: This target downloads the required libraries and puts them into the lib/ folder</li>
</ul>

<h2><a name="run">Running x2svg</a></h2>

To run the application, you need to put a big number of libs on the classpath. <br/>
To make this easier, you can use the <em>run.sh</em> script on unix, which accepts the same command line
as the X2Svg java class:
<pre>
run.sh [options] inputfile [root-element]
</pre>
Options are:
<ul>
<li>  +/-a: allow / disallow attribute parsing. Depends on the parer if this is supported. Default is off</li>
<li>   -c [file][:type] : generate output in the format of type in file <em>file</em> 
(see <a href="#types">below</a> for possible types)</li>
<li>   -o file        : write output to &lt;file&gt;.svg instead of 
&lt;inputfile-basename>.svg</li>
<li>   -m (dtd|properties|ant|xsd): Use the given mode instead of guessing the input type</li>
<li>   -C comment : print a comment on the generated graph.
See <a href="properties.html#subst">here</a> for supported substitutions.</li>
<li>   -P properties file : specifies the location of <a href="properties.html">x2svg.properties</a></li>
<li>   -l list all available parsers.</li>
<li>   -p mode: show the parser specific help for the specified parser. 
Use an asterisk '*' to get it for all parsers.</li>
<li>   -d: enable debug mode (with lots of non-interesting output :-)</li>
<li>   +/-M: allow / disallow parsing comments of elements (and possibly 
attributes). Depends on the parser if this is supported. Default is off.</li> 
</ul>
Example:
<pre>
 sh run.sh -c /tmp/test.pdf -o /tmp/test.svg sample.dtd root
</pre>
The ant buildfile <em>build.xml</em> shows how to run this from an ant script in the 
<em>run-sample</em> target.
<p/>
Note that option -c can be given multiple times.<br/>
X2svg usually tries to determine
the output file type from looking at the suffix (e.g. <em>.pdf</em>), but this can be
overridden by giving a target type in the optional <em>:type</em> part. If you want you can
specify the type multiple times to convert into all of those target types. The type specifications
need to be given next to each other then (as in <em>-c output.foo:png:pdf</em>.<br/>
It is also possible to only speficy the type (as in <em>-c :pdf</em>). In this case x2svg will determine
the output file name by chopping off the <em>.svg</em> from the input file name and 
appending the standard suffix for the given type.<br/>
It is as well possible to give an output directory with a file type only 
(as in <em>-c foo/:png</em>. In this case the output will be written into 
directory <em>foo/</em> and
the filename will be deviated from the input filename.

<h3><a name="gui">The Graphical user interface</a></h3>

X2svg has since version <em>1.1-gui</em> a graphical user interface. You can start it
by running the class <code>de.bsd.x2svg.gui.X2SvgGui</code> or use one of the start
scripts <code>runGui.bat</code> or <code>runGui.sh</code>.
After starting, the GUI will show a window like this (here in German locale):
<br/>
<img src="img/x2svg-gui.png" alt="Image of the x2svg GUI" title="The x2svg gui (in German locale)"/>
<br/>
The first two rows are used to select the input file and the svg output file. The two buttons labeled with '...' will show file selector boxes to browse the file system.
<br/>
If the checkbox is checked (as shown), then x2svg will also try to convert the generated
svg file into another output format (see <a href="#types">below</a> for formats).
<br/>
On the next line, you can enter a comment that will printed on the generated diagram.
If the checkbox is markd, a default comment from the properties file <code>x2svg.properties</code> will be used. See <a href="properties.html#subst">here</a> for supported substitutions.
<br/>
Pressing the <em>Start</em> button will start the conversion.
<br/>
If you checked the "Show svg option", a second window will appear after the conversion that
shows the gnerated SVG. You can scroll around and use the '++','--','1:1' and 'x' controls
to zoom in, zoom out reset the size and center the display. See also
<a href="img/x2svg-gui2.png">this screenshot</a>.

<h3><a name="types">Supported output types other than svg</a></h3>
<ul>
<li>eps</li>
<li>pdf</li>
<li>png</li>
<li>jpg</li>
<li>tiff</li>
</ul>

<h3>Run the svg converters</h3>

The output converter SvgConverter can also be used standalone:

<pre>
java de.bsd.x2svg.outputConverter.SvgConverter type(s) input.svg output[.type] [output dir]
</pre>
As this also needs a bunch of libraries installed, a shell script <em>convert.sh</em> is provided
as well.

<h2><a name="parsers">Parsers</a></h2>

This paragraph describes the various parsers present in the system.

<h3>DTDParser</h3>

This parser is able to parse Document type descriptions (DTD). If no root-element is given
on the command line, it will try to guess the root element. 
If the parsers specific option '-d &lt;depth&gt;' is given, then the depth of the tree is limited to
<em>depth</em> levels instead of unlimited. This parer supports parsing of attributes.

<h3>Build.xml Parser</h3>

This parser is able to parse ant build.xml files. It will by default graph the call tree
when you just call ant on that buildfile without any targets (so it will use the default target).
By giving the '-f' option, it will go trough the build file and will graph a forest of all targets.

<h3>Properties Parser</h3>

This parser will just display all properties in a property file and is mostly meant as an example to start
writing own parsers.

<h3>XML Schema Parser</h3>

This parser is able to parse (some) XML Schema files. As it is still not finished,
it might not parse your schema.
<br/>
By default, you need to give the name of the root element to parse.
It now also understands a few more options:
<ul>
    <li>-ls: limit substitutions. If this option is given, then a substitution will not be done, but only the type of substitution will be output.</li>
    <li>-d tree-depth: Limit printing the result tree to the given depth.</li>
    <li>-lt: limit type relpacement. If this option is given, then types will not preplaced by their definition, but only the name of the definition will be output</li>
    <li>-st: the passed root is the name of a <i>s</i>tart <i>t</i>ype.
</ul>
This parer supports parsing of attributes.

<h2><a name="ant">Ant tasks</a></h2>

<p>
There are a set of ant tasks that allow X2SVG to be used in any Ant-based automated build. This can be
incredibly useful for generating documentation as part of an automated build process, or for parsing
large and diverse content sets very simply.
</p>

<p>
To use X2SVG, simply ensure that X2SVG.jar is available on the ant classpath (either project
specific, or put in <code>$ANT_HOME/lib</code> for global availability of the X2SVG tasks.
</p>

<p>
Full documentation for the ant tasks can be found <a href="ant-tasks.html">here.</a>
</p>

<h2><a name="license">License</a></h2>

<pre>
*******************************************************************************
 * Copyright (c) 2007,2008 Heiko W. Rupp. 	All rights reserved. 
 * 
 * This is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as
 * published by the Free Software Foundation; either version 2.1 of
 * the License, or (at your option) any later version.
 * 
 *  This software is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 *  Lesser General Public License for more details.
 *  
 * You should have received a copy of the GNU Lesser General Public
 * License along with this software; if not, write to the Free
 * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
 * 02110-1301 USA, or see the FSF site: http://www.fsf.org.
 *******************************************************************************/
 </pre>
</div>
</body>
</html>
